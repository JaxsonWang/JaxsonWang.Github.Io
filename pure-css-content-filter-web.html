<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.4.1" rel="stylesheet" type="text/css">

<link href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/default.css" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.ico?v=6.4.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.ico?v=6.4.1">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.1" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.4.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="纯CSS过滤内容提示：  边看demo边食用，效果更佳 科普一下伪元素：target  仅仅通过CSS过滤内容，这是一个非常有趣且有吸引力的方法。 （译者注：作者在这里是说，他在半夜两点的时候喝了酒，然后突然想做个实践，就是纯CSS过滤内容） 通过CSS的:target的伪选择器，用户点击导航之后，我们可以过滤出所需内容。通过用相邻的兄弟选择器，我们可以定义DOM后续部分的样式。 来看看一个例子d">
<meta name="keywords" content="CSS,Web前端">
<meta property="og:type" content="article">
<meta property="og:title" content="纯CSS过滤内容">
<meta property="og:url" content="https://jaxsonwang.github.io/pure-css-content-filter-web.html">
<meta property="og:site_name" content="淮城一只猫">
<meta property="og:description" content="纯CSS过滤内容提示：  边看demo边食用，效果更佳 科普一下伪元素：target  仅仅通过CSS过滤内容，这是一个非常有趣且有吸引力的方法。 （译者注：作者在这里是说，他在半夜两点的时候喝了酒，然后突然想做个实践，就是纯CSS过滤内容） 通过CSS的:target的伪选择器，用户点击导航之后，我们可以过滤出所需内容。通过用相邻的兄弟选择器，我们可以定义DOM后续部分的样式。 来看看一个例子d">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-09-28T15:38:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="纯CSS过滤内容">
<meta name="twitter:description" content="纯CSS过滤内容提示：  边看demo边食用，效果更佳 科普一下伪元素：target  仅仅通过CSS过滤内容，这是一个非常有趣且有吸引力的方法。 （译者注：作者在这里是说，他在半夜两点的时候喝了酒，然后突然想做个实践，就是纯CSS过滤内容） 通过CSS的:target的伪选择器，用户点击导航之后，我们可以过滤出所需内容。通过用相邻的兄弟选择器，我们可以定义DOM后续部分的样式。 来看看一个例子d">






  <link rel="canonical" href="https://jaxsonwang.github.io/pure-css-content-filter-web.html">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>纯CSS过滤内容 | 淮城一只猫</title>
  






  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?c2f0abf0cbe0d6b8d33de1598a8a43d9";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">淮城一只猫</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">关注互联网及IT科技的个人博客</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jaxsonwang.github.io/pure-css-content-filter-web.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="淮城一只猫">
      <meta itemprop="description" content="淮城一只猫，是一个关注于互联网、IT技术经验分享的个人独立博客。更新互联网最火热的IT技术文章、软件应用科技原创文章，提供全面深入的IT信息资讯服务，为访问者提供富有互联网资讯。致力成为互联网上最个性、最极客、具传播力的个人独立博客。">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="淮城一只猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">纯CSS过滤内容
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-10-28 23:15:51" itemprop="dateCreated datePublished" datetime="2016-10-28T23:15:51+09:00">2016-10-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-09-29 00:38:37" itemprop="dateModified" datetime="2018-09-29T00:38:37+09:00">2018-09-29</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/编程技术/" itemprop="url" rel="index"><span itemprop="name">编程技术</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/pure-css-content-filter-web.html#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/pure-css-content-filter-web.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="纯CSS过滤内容"><a href="#纯CSS过滤内容" class="headerlink" title="纯CSS过滤内容"></a>纯CSS过滤内容</h1><p><strong>提示：</strong></p>
<ul>
<li>边看<a href="http://www.sassmeister.com/gist/04045234e626aede7d0064ae202f81c4" target="_blank" rel="noopener">demo</a>边食用，效果更佳</li>
<li>科普一下伪元素<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/:target" target="_blank" rel="noopener">：target</a></li>
</ul>
<p>仅仅通过CSS过滤内容，这是一个非常有趣且有吸引力的方法。 （译者注：作者在这里是说，他在半夜两点的时候喝了酒，然后突然想做个实践，就是纯CSS过滤内容）</p>
<p>通过CSS的<code>:target</code>的伪选择器，用户点击导航之后，我们可以过滤出所需内容。通过用相邻的兄弟选择器，我们可以定义DOM后续部分的样式。</p>
<p>来看看一个例子<a href="http://www.sassmeister.com/gist/04045234e626aede7d0064ae202f81c4" target="_blank" rel="noopener">demo</a>.</p>
<h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><p>我们从简单地定义需要过滤内容开始，<code>.c-filter</code>。所有的元素都会放在<code>section</code>这个节点中。</p>
<pre><code>&lt;section class=&quot;c-filter&quot;&gt;
  ...
&lt;/section&gt;
</code></pre><p>接着，我们罗列出过滤目标。每个过滤主题都有一个目标，并且每个元素上都加上了相同的class，并且配有一个和主题相关的特殊ID。这些ID是<code>:target</code>选择器之后会查找的：这些是准备工作整个技术的核心框架。</p>
<p>他们都是被定义为（空）锚元素<code>&lt;a&gt;</code>，因为他们就是他们的样子：用来链接的锚。</p>
<pre><code>&lt;a class=&quot;c-filter__target&quot; id=&quot;tag:css&quot;&gt;&lt;/a&gt;
&lt;a class=&quot;c-filter__target&quot; id=&quot;tag:html&quot;&gt;&lt;/a&gt;
&lt;a class=&quot;c-filter__target&quot; id=&quot;tag:accessibility&quot;&gt;&lt;/a&gt;
&lt;a class=&quot;c-filter__target&quot; id=&quot;tag:performance&quot;&gt;&lt;/a&gt;
&lt;a class=&quot;c-filter__target&quot; id=&quot;tag:vim&quot;&gt;&lt;/a&gt;
</code></pre><p>这之后，我们过滤用户会点击的链接：</p>
<pre><code>&lt;nav class=&quot;c-filter__links&quot;&gt;
  &lt;a href=&quot;#tag:all&quot; class=&quot;c-filter__link  c-filter__link--reset&quot;&gt;Reset&lt;/a&gt;
  &lt;a href=&quot;#tag:html&quot; class=&quot;c-filter__link&quot;&gt;HTML&lt;/a&gt;
  &lt;a href=&quot;#tag:css&quot; class=&quot;c-filter__link&quot;&gt;CSS&lt;/a&gt;
  &lt;a href=&quot;#tag:accessibility&quot; class=&quot;c-filter__link&quot;&gt;Accessibility&lt;/a&gt;
  &lt;a href=&quot;#tag:performance&quot; class=&quot;c-filter__link&quot;&gt;Performance&lt;/a&gt;
  &lt;a href=&quot;#tag:vim&quot; class=&quot;c-filter__link&quot;&gt;Vim&lt;/a&gt;
&lt;/nav&gt;
</code></pre><p>每一个链接都有一个相同的class，并且<code>href</code>指向各自的锚。当一个用户点击其中一个链接，我们的<code>:target</code>选择器会截获信息并作出相应行为。</p>
<p>下面，我们想要过滤的内容。在这个例子中，这些项目是博客文章。</p>
<pre><code>&lt;article class=&quot;c-article c-filter__item&quot; data-tag=&quot;vim&quot;&gt;
  &lt;h2&gt;Using Macros&lt;/h2&gt;
  &lt;p&gt;Pellentesque habitant morbi tristique senectus et netus et malesuada
  fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies
  eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper.
  Aenean ultricies mi vitae est. Mauris placerat eleifend leo.&lt;/p&gt;
&lt;/article&gt;
</code></pre><p><code>article</code>元素有十分值得一提的元素。首先，他们都有<code>c-article</code>这个class，这和过滤分离没有关系的class：这个class只是为articles写样式的并且不用于过滤。</p>
<p>其次， 他们都有<code>c-filter__item</code>这个class：这只是简单的布了下局，并不是真正的过滤。</p>
<p>最后我们看到<code>data-tags</code>这个属性，这个是包含了一个或多个与过滤内容相关的标签。这些数据属性对过滤来说是必要的存在，因为我们需要通过这些值来确定哪些是用展现给户。</p>
<p>流程就像下面这样：</p>
<ol>
<li>页面加载显示全部项目。</li>
<li>用户点击一个过滤的链接，这个链接跳至相对应的<code>#tags:*</code>锚的这里，同时在url后面加上这个id。</li>
<li>我们会抓住所有的用 <code>:target</code>为元素的片段标识符。</li>
<li>我们会用这个知识点来显示/隐藏相关内容。</li>
</ol>
<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><p>主要工作都在CSS。第一部分并没有令人兴奋的点。只是一个加点样式然后布局元素。</p>
<pre><code>/**
 * 1\. Clearfix our filter context.
 */
.c-filter {
  overflow: hidden; /* [1] */
}

  .c-filter__links {
    padding: 1em;
    margin-bottom: 1em;
    background-color: #fff;
    border-bottom: 1px solid #e5e5e5;
  }

    .c-filter__link {
      display: inline-block;
      padding: 0.5em 1em;
      border-radius: 100px;
      background-color: rgba(0, 0, 0, 0);
      transition: 0.333s;
    }

    .c-filter__link--reset {
      border-right: 1px solid;
      border-radius: 0;
    }

  .c-filter__item {
    float: left;
    width: calc(33.333333333% - 1em);
    margin-right: 0.5em;
    margin-bottom: 1em;
    margin-left: 0.5em;
    transition: 0.333s;
  }
</code></pre><p>现在，事情变得有些有趣了：</p>
<pre><code>.c-filter__target:not(:target) ~ .c-filter__item {
  opacity: 1;
}
</code></pre><p>这个选择器做了一些事情。让我们来分析分析他：</p>
<ul>
<li><code>.c-filter__target</code>指向我们所有空元素<code>a</code>。</li>
<li><code>:not(:target)</code>检查没有锚（<code>&lt;a&gt;</code>）当前是被指定的。</li>
<li><code>~</code>是相邻的兄弟选择器，并且这是寻找DOM之后出现的东西，但是却是在DOM树中相同层级的元素。</li>
<li><code>.c-filter__item</code>只是寻找我们所有可过滤的元素。</li>
</ul>
<p>因此基本上，如果我们当前没有指定任何锚，在DOM之后的节点寻找过滤的项目并且确保他们都是可见的。</p>
<p>‘可见’在这里的就是 <code>opacity: 1;</code>。这里也可以是其他的（e.g. 在我的第一版，这里这实际上从 <code>display: block;</code>开始）。</p>
<p>接下来的一些CSS看上去有些相似：</p>
<pre><code>.c-filter__target:target ~ .c-filter__item {
  opacity: 0.25;
}
</code></pre><p>我们在做和之前几乎一样的查找，这次我们只是少了<code>:not()</code>选择器。这就意味着我们在检查哪些锚是被指向的，如果是这样的，隐藏我们所有的过滤项目 (<code>opacity: 0.25;</code>)。</p>
<p>因此这里有两件事：如果没有锚被指向，显示所有的；如果有任意的锚被指向，隐藏所有的。</p>
<p>当我们把所有都隐藏之后，我们想打开指定的项目。我们需要多做一些事，因为我们在寻找特定的DOM节点：我们不能用一个通用的规则。</p>
<p>在这里我需要用Sass帮我完成，就像这样：</p>
<pre><code>@each $tag in html, css, accessibility, performance, vim {
  [id=&quot;tag:#{$tag}&quot;]:target ~ [data-tag~=&quot;#{$tag}&quot;] {
    opacity: 1;
  }
  ...
}
</code></pre><p>这里，遍历每一个标签，并且遍历所有像下面这样的选择器：</p>
<pre><code>`[id=&quot;tag:css&quot;]:target ~ [data-tag~=&quot;css&quot;] { ... }`
</code></pre><p>在这里发生了什么？</p>
<ul>
<li><code>[id=&quot;tag:css&quot;]:target</code>检查id和<code>tag:css</code>完全相同的锚是否被指定。**N.B.**我不能将此选择器写成<code>#tag\:css:target</code>，有两个我不能这么做的原因：首先，正如你所见我们要避开那个冒号。其次，我们在CSS中用ID。将此作为属性选择器写意味着我不需要放任何的其他特定CSS hook在hmtl中个，并且额外的好处是用class的特殊性来选择id。</li>
<li><code>~</code>就像之前那样，是选择当前DOM之后的节点并且是DOM树上同一层级上的某一元素。</li>
<li><code>[data-tag~=&quot;css&quot;]</code>是之后的元素，和DOM树在同一层级上的，<code>~</code>正在寻找的元素。我现在要做的就是用子选择器来找出<code>data-tags</code>这个属性的内容。<code>~=</code>明确地表示了这个属性包含了一系列空格隔开的值，然后那些值和 <code>css</code>（在那种情况下）是一样的。</li>
</ul>
<p>因此如果我们瞄准了一个<code>css</code>锚，请找所有在DOM树之后出现的标记了<code>css</code>的元素。一旦找了到，就将他们展示出来：</p>
<pre><code>`opacity: 1;`
</code></pre><p>这就是对于过滤工作必要的事情——实际上是代码的一小部分。</p>
<h3 id="突出当前过滤的链接"><a href="#突出当前过滤的链接" class="headerlink" title="突出当前过滤的链接"></a>突出当前过滤的链接</h3><p>我认为有一个极佳的尝试，就是给当前过滤的链接加一个样式，因此用户可以看到那些内容他们想看的。这比我预期的要复杂一些，但是并不是不可解决的。</p>
<p>在同样的Sass循环之前，我生成了一套新的选择器，看上去像这样：</p>
<pre><code>`[id=&quot;tag:css&quot;]:target ~ .c-filter__links [href=&quot;#tag:css&quot;] { ... }`
</code></pre><p>一步步通过吧：</p>
<ul>
<li><code>[id=&quot;tag:css&quot;]:target</code>严查了css锚当前是否被选中。</li>
<li><code>~</code>查看当前DOM后续的元素.</li>
<li><code>.c-filter__links</code>就是我们在寻找的东西。</li>
<li><code>[href=&quot;#tag:css&quot;]</code> 正在寻找<code>href</code>的值和<code>#tag:css</code>相同的元素。</li>
</ul>
<p>在这里我发现一件很有趣的事情就是获取链接。因为他们都在<code>nav</code>元素(<code>.c-filter__links</code>)之中——因此不是在DOM树的统一层次中。根据<code>~</code>选择器要求那样——我不能直接通过<code>~</code>选择器指定他们。因为这悲伤的事实，我几乎放弃了高亮练习，但是之后我发现了解决方案。</p>
<p>不同于指向连接自己，我可以指定他们的<code>nav</code>元素因为它在DOM树中统一层级的。接下来的步奏就是寻找正确连接。这就是为什么我要嵌套最后一个选择器。</p>
<h3 id="尴尬的页面跳转"><a href="#尴尬的页面跳转" class="headerlink" title="尴尬的页面跳转"></a>尴尬的页面跳转</h3><p>还有一个我不费吹灰之力解决的问题。因为我们要链接到片段标识，页面如果很长需要滚动，那么跳转的时候就会很可怕。解决方案是就是固定一页（也就是不要滚动）。</p>
<p>因为我们要链接到空的锚元素，他们完全不会在页面上显示（但是他们确实在DOM中存在，这就是为什么我们让页面跳转）。通过简单的的 <code>position: fixed;</code>给所有的锚元素，他们会在页面左上角定位。实际的结果是锚会在用户滚动到的地方，因此页面并不会真的跳到其他地方。</p>
<pre><code>.c-filter__target {
  position: fixed;
}
</code></pre><p>问题解决啦~</p>
<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><p>这个技术中有一些缺点。没有特定的顺序：</p>
<ul>
<li>添加新的标签意味着编写和重新编译新的CSS。我们可通过CMS将一个“样式”块注入到页面中，并且重复我们的标签，以此来绕过。因此这不完全是世界末日。</li>
<li>过滤新增的历史状态。通过过滤器点击按钮10几次可能会让你变得非常恼火。 然而，这确实意味着我们可以直接链接到过滤之后的结果。</li>
<li>可获得性。说真的，我不确定这对可获得性是好消息还是坏消息。不过毫无疑问的是我们可以做一些提升。至少它不是用<code>checkbox</code>的hack，对吧？</li>
<li>我能完全这么做吗？我感觉css做了js的事情。</li>
<li>讨厌的CSS，嵌套的选择器，子选择器，严重依赖位置。这不是最好的，不是吗？</li>
</ul>
<p>自从我像这样玩转CSS，已经过了很长时间了。并且依然很有意思。我需要确认我要经常像这样做事。</p>
<hr>

      
    </div>

    

    
    
    

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>淮城一只猫</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://jaxsonwang.github.io/pure-css-content-filter-web.html" title="纯CSS过滤内容">https://jaxsonwang.github.io/pure-css-content-filter-web.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/CSS/" rel="tag"># CSS</a>
          
            <a href="/tags/Web前端/" rel="tag"># Web前端</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/responsive-images-in-css-web.html" rel="next" title="CSS中的响应式图片">
                <i class="fa fa-chevron-left"></i> CSS中的响应式图片
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/styling-underlines-on-the-web.html" rel="prev" title="手把手教你处理下划线">
                手把手教你处理下划线 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">淮城一只猫</p>
              <p class="site-description motion-element" itemprop="description">淮城一只猫，是一个关注于互联网、IT技术经验分享的个人独立博客。更新互联网最火热的IT技术文章、软件应用科技原创文章，提供全面深入的IT信息资讯服务，为访问者提供富有互联网资讯。致力成为互联网上最个性、最极客、具传播力的个人独立博客。</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">230</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">分类</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">49</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/JaxsonWang" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:i@iiong.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#纯CSS过滤内容"><span class="nav-number">1.</span> <span class="nav-text">纯CSS过滤内容</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#HTML"><span class="nav-number">1.1.</span> <span class="nav-text">HTML</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSS"><span class="nav-number">1.2.</span> <span class="nav-text">CSS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#突出当前过滤的链接"><span class="nav-number">1.2.1.</span> <span class="nav-text">突出当前过滤的链接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#尴尬的页面跳转"><span class="nav-number">1.2.2.</span> <span class="nav-text">尴尬的页面跳转</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#缺点"><span class="nav-number">1.3.</span> <span class="nav-text">缺点</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">本博客所有文章是<a href="https://iiong.com">淮城一只猫</a>归档。</span>

  

  
</div>











        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.1"></script>
<script type="text/javascript" src="/js/src/highlight.pack.js?v=6.4.1"></script>
<script type="text/javascript">
hljs.initHighlightingOnLoad();
</script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.1"></script>



  



  








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
    
  
  <script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: true,
        notify: true,
        appId: 'CYNFVtmW68hwThPgXLqDFSh5-gzGzoHsz',
        appKey: 'SiCtdjUGhYsXKexd1eIkkdWE',
        placeholder: '支持Markdown评论',
        avatar:'mm',
        meta:guest,
        pageSize:'10' || 10,
        visitor: false
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
